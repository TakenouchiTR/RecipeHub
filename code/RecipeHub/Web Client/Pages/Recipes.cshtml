@page
@using Web_Client.ViewModel.Users
@using Microsoft.AspNetCore.Mvc.TagHelpers
@using Shared_Resources.Data.UserData
@using Shared_Resources.Model.Users
@model Web_Client.Pages.RecipesModel
@{
    //TODO The user info page should at some point should be removed
    UserInfo userInfo = null;
    try
    {
        var viewModel = new UsersViewModel();
        userInfo = viewModel.GetUserInfo();
    }             
    catch (UnauthorizedAccessException exception)
    {
        TempData["Message"] = exception.Message;
        Response.Redirect("/Index");
    }
}

<h1>Welcome Your Session Key is: @Session.Key</h1>
<h2>Username: @userInfo.UserName</h2>
<h2>First Name: @userInfo.FirstName</h2>
<h2>Last Name: @userInfo.LastName</h2>
<h2>Email: @userInfo.Email</h2>

@using (Html.BeginForm())
{
    <form method="post">
        <input type="submit" value="Logout" asp-page-handler="Logout" asp-page="/Index" />
    </form>
}